if(!_lt){window._lt={}}window._lt.commerceServices=(function(){function c(l){var m=$("<span>"+l+"</span>");return m.text()}function j(){this.host=environmentURL.COMERGENTSERVER;this.country="US";this.language="en";this.entryPoint="adirect";this.partner="lt";this.jsessionid=getCookie("CartSessionID");this.cmd="";this.operation="";this.cartKey=getCookie("CartKey");this.callback=""}function b(p,s){var o=new j();var r=p.source;o.cmd=p.cmd;o.operation=p.operation;if(p.sessionId){o.jsessionid=p.sessionId}if(p.cartKey){o.cartKey=p.cartKey}var q={};if(o.cmd){q.cmd=o.cmd}if(o.operation){q.operation=o.operation}if(o.cartKey){q.cartKey=o.cartKey}$.extend(q,p.params);var m="//"+o.host+"/"+o.language+"/"+o.country+"/"+o.entryPoint+"/"+o.partner;if(o.jsessionid){m+=";jsessionid="+o.jsessionid}m+="?"+$.param(q);var l={url:m,method:"POST",type:"POST",dataType:"json"};var n={cartKey:f(o.cartKey),lineItems:d(s,r)};if(p.notJSON){l.data={JSONObject:JSON.stringify(n)}}else{l.contentType="application/json; charset=utf-8";l.data=JSON.stringify(n)}return l}function f(o){if(o&&typeof o=="object"){var m;if(typeof o.length!="undefined"){m=[]}else{m={}}for(var n in o){var l=o[n];m[n]=f(l)}return m}else{if(o!==false&&!o){return""}else{return o}}}function d(q,p){if(!q.length){q=[q]}var o=[];for(var l=0;l<q.length;l++){var n=q[l];var m={quantity:n.qty,lineNo:n.lineNo,checkForSKUCollisions:!!n.checkForSKUCollisions,lineSourceId:p,parentLineNo:n.parentLineNo,poNumber:n.poNumber,remarks:n.remarks,customerName:n.customerName,reserveNumber:n.reserveNumber,product:{sku:n.sku,productSize:n.size,description:n.description,productAttributes:{id:n.assayID,name:n.assayName,purity:n.purity,scale:n.scale,baseLineSku:n.baseLineSku,ratePlanId:n.ratePlanId,ratePlanName:n.ratePlanName,ratePlanCharges:[{id:n.productRateChargeId,billingPeriod:n.billingPeriod}]}}};m=f(m);o.push(m)}return o}function h(m,p,q){var n={};n.isGenericMessage=false;var l=(p!=="success"||!m||typeof m!="object"||m.statusCode==="511"||m.errorMessage);if(!m){m={status:"error"}}n.statusCode=m.status;n.statusDetailType=p;n.data=m;if(typeof q=="string"){n.statusDetailMessage=q}if(l){n.success=false;if(n.statusDetailType==="success"){n.statusDetailType="other"}if(m.statusCode==="511"){n.message=m.message;n.statusCode=511}else{if(n.errorMessage){n.message=n.errorMessage}else{n.message=c(localizedStrings.SUBMIT_ERROR_SERVER);n.isGenericMessage=true}n.statusCode=500}}else{var s=false;if(!!m.lineItems&&m.lineItems.length>0){for(var r=0;r<m.lineItems.length;r++){var t=m.lineItems[r];if(!!t.messages&&!!t.messages.HEADER_MESSAGES&&t.messages.HEADER_MESSAGES.length>0){for(var o=0;o<t.messages.HEADER_MESSAGES.length;o++){var u=t.messages.HEADER_MESSAGES[o];s=!!u&&u.code!=200;if(s){break}}}if(s){break}}}if(s&&!m.currencySymbol){n.success=false;n.message=c(localizedStrings.MINICART_ERROR_3);n.statusDetailType="validation";n.isGenericMessage=true}else{n.success=true;if(m.message){n.message=m.message}else{if(m.lineItems){n.message=c(localizedStrings.MINICART_NOTE_1);n.isGenericMessage=true}else{n.message=n.statusDetailType}}}}return n}function a(m,o,p){function n(t,q,s){var r=h(t,q,s);console.log("commerce call complete",r);if(p){p(r)}}var l=b(m,o);l.success=n;l.error=n;$.ajax(l);return true}function e(m,o){var n;if(m[0]){n=m[0].sku}else{n=m.sku}var l={cmd:"validateAuthentication",operation:"addToFavorites",params:{targetMessageType:"commercePodOperations",responseType:"json",productID:n}};a(l,m,o)}function k(n,p,l,o){var m={notJSON:true,cmd:"IVGNCartOperations",operation:"AddToCart",cartKey:l,sessionId:o};a(m,n,p)}function g(n,p,l,o){var m={cmd:"IVGNCartOperations",operation:"quickOrder",source:"QO",cartKey:l,sessionId:o};a(m,n,p)}return{processRemoteResponse:h,convertProductsToJSON:d,addProductsToFavorites:e,addProductsToCart:k,bulkAddProductsToCart:g}})();function MiniCart(){this.itemList=[];this.itemLine=[];this.cartKey="";this.cartSubTotal="";this.jsessionid="";this.error="";this.hasError=false;this.visible=false;this.cartName="";this.numberOfItems=0;this.currencySymbol="";this.subscriptionTotalPrice="";this.productTotalPrice="";this.totalQuantity="";this.isAnonymous="";this.totalItems=function(){return this.totalQuantity};this.addItem=function(item){if(!this.itemList){this.itemList=[]}var miniCartItem=new MiniCartItem(item);this.itemList.push(miniCartItem)};this.addLineKey=function(sku,quantity,description,price,size,assayID,assayName,purity,scale,ratePlanId,ratePlanName,productRateChargeId,baseLineKey,baseLineSku,billingPeriod,lineNo,parentLineNo){var miniCartLine=new MiniCartLine(sku,quantity,description,price,size,assayID,assayName,purity,scale,ratePlanId,ratePlanName,productRateChargeId,baseLineKey,baseLineSku,billingPeriod,lineNo,parentLineNo);this.itemLine.push(miniCartLine)};this.setCartName=function(cartName){if(cartName!=undefined){if(!compareCookieValueToJSON(cartName,this.cartName)){this.cartName=cartName}}};this.setCurrency=function(currency){if(currency!=undefined){if(!compareCookieValueToJSON(currency,this.currencySymbol)){this.currencySymbol=currency}}};this.setcartSubtotal=function(cartSubtotal){if(cartSubtotal!=undefined){if(!compareCookieValueToJSON(cartSubtotal,this.cartSubTotal)){this.cartSubTotal=cartSubtotal}}};this.setProductTotalPrice=function(productTotal){if(productTotal!=undefined){this.productTotalPrice=productTotal}};this.setSessionValues=function(session){if(session!=undefined){if(!compareCookieValueToJSON(session,this.jsessionid)){this.jsessionid=session}}};this.setNumberOfItems=function(totalItems){if(totalItems!=undefined){if(!compareCookieValueToJSON(totalItems,this.totalQuantity)){this.totalQuantity=totalItems}}};this.JSONToMiniCart=function(json){var newCart=window.getCookie("newCart");if(!!newCart&&isNotEmpty(json)){this.loaded=true;var obj=eval(json);this.setNumberOfItems(obj.totalQuantity);this.cartName=obj.cartName||"Cart";if(obj.subTotal!=null&&obj.subTotal!=""){this.cartSubTotal=obj.subTotal}if(obj.isAnonymous){this.isAnonymous=obj.isAnonymous}if(obj.miniCartItems!=null&&obj.miniCartItems!=undefined&&obj.miniCartItems!=""){this.itemList=[];$.each(obj.miniCartItems,function(i,item){miniCart.addItem(item)})}}if(!newCart){if(isNotEmpty(json)){this.loaded=true;this.executeLoadCartSuccessCallback();var obj=eval(json);this.error=obj.errorMessage!=""?obj.errorMessage:"";this.isHidePricing=obj.maskPrice;this.setNumberOfItems(obj.totalQuantity);this.setCartKey(obj.cartKey);if(!isUndefined(this.error)&&this.error!=""&&this.error!=environmentURL.NOCARTERROR){this.hasError=true}else{this.hasError=false}if(obj.cartSubTotal!=null&&obj.cartSubTotal!=""){this.cartSubTotal=obj.cartSubTotal}if(obj.numOfLineItems!=null&&obj.numOfLineItems!=""){this.numberOfItems=obj.numOfLineItems}if(obj.isAnonymous!=null&&obj.isAnonymous!=""){this.isAnonymous=obj.isAnonymous}if(obj.promoURIString!=null&&obj.promoURIString!=""){this.promoURIString=obj.promoURIString}if(obj.jsessionid!=null&&obj.jsessionid!=""){this.setSessionValues(obj.jsessionid)}else{if(obj.jsessionId!=null&&obj.jsessionId!=""){this.setSessionValues(obj.jsessionId)}}if(obj.cartKey!=null&&obj.cartKey!=""){this.cartKey=obj.cartKey}if(obj.lineItems!=null&&obj.lineItems!=undefined&&obj.lineItems!=""){this.setCartName(obj.cartName);this.setCurrency(obj.currencySymbol);this.itemList=[];$.each(obj.lineItems,function(i,item){miniCart.addItem(item)})}else{}}else{this.itemList=[];this.itemLine=[];this.cartKey="";this.cartSubTotal="";this.jsessionid="";this.error=localizedStrings.MINICART_ERROR_1;this.hasError=false;this.visible=false;this.cartName="";this.numberOfItems=0;this.currencySymbol="";this.subscriptionTotalPrice="";this.productTotalPrice="";this.totalQuantity="";this.isAnonymous="";deleteCartCookies()}}showViewCart();this.hideStatus()};function isNotEmpty(object){for(var i in object){return true}return false}}function MiniCartItem(a){var b=window.getCookie("newCart");if(!b){this.product=a.product;this.attributes=a.attributes;this.price=a.price;this.sku=this.product.sku;this.productName=this.product.description;this.quantity=this.product.quantity}if(!!b){this.catalogNumber=a.catalogNumber;this.catalogTitle=a.catalogTitle;this.catalogUrl=a.catalogUrl;this.quantity=a.quantity;this.itemSubTotal=a.itemSubTotal;this.listPriceTotal=a.listPriceTotal;this.priceAccess=a.priceAccess;this.leadTarget=a.leadTarget;this.entitled=a.entitled;this.priceAccessLink=a.priceAccessLink}}function MiniCartLine(g,d,l,k,h,j,p,q,r,b,c,o,f,a,n,e,s){this.SKU=g;this.quantity=d;this.name=l;this.unitPrice=k;this.size=h;this.assayID=j;this.assayName=p;this.purity=q;this.scale=r;this.ratePlanId=b;this.ratePlanName=c;this.productRateChargeId=o;this.baseLineKey=f;this.baseLineSku=a;this.billingPeriod=n;if(s){this.parentLineNo=s}else{this.parentLineNo=""}if(e){this.lineNo=e}else{this.lineNo=""}for(var m in this){if(!this[m]||this[m]=="undefined"||this[m]==undefined){this[m]=""}}}function MiniCartRequest(){this.protocol=document.location.toString().indexOf("https://")!=-1?"https:":"http:";this.host=environmentURL.COMERGENTSERVER;this.country="US";this.language="en";this.entryPoint="adirect";this.partner="lt";this.jsessionid="";this.command="IVGNCartOperations";this.operation="";this.cartKey="";this.callback=""}function CartRequest(){this.protocol=document.location.toString().indexOf("https://")!=-1?"https:":"http:";this.host=environmentURL.WCMSERVER;this.addCartApi="api/store/carts"}MiniCart.prototype.requestJSON=function(b){var a=document.createElement("script");a.type="text/javascript";a.charset="utf-8";a.src=b;document.getElementsByTagName("head").item(0).appendChild(a)};MiniCart.prototype.loadCart=function(){var b;var c=window.getCookie("newCart");if(!c){if(isUndefined(this.totalQuantity)||isNaN(this.totalQuantity)||this.totalQuantity==""){b=this.createRequestURL("GetCartContents","displayMiniCartFetched",miniCart.jsessionid,miniCart.cartKey)}else{b=this.createRequestURL("GetCartContents","displayMiniCart",miniCart.jsessionid,miniCart.cartKey)}miniCart.showStatus("loading");this.loaded=true;this.requestJSON(b)}if(!!c){miniCart.showStatus("loading");this.loaded=true;getMiniCartDetails()}function a(){return this.isAnonymous}};MiniCart.prototype.forceUpdate=function(){this.refreshCartSessionID()};MiniCart.prototype.refreshCartSessionID=function(){if(getCookie("CartSessionID")!=""){miniCart.jsessionid=getCookie("CartSessionID")}if(getCookie("CartKey")!=""){miniCart.cartKey=getCookie("CartKey")}};MiniCart.prototype.addProductsToCart=function(o,k){var b=false;if(!o||typeof o!="object"){}else{if(!Array.isArray(o)){o=[o]}var l=[];var g=false;var a=new Ominiture();a.additionalOmniParameters=k;var p;for(i=0;i<o.length;i++){p=o[i];if(p.qty&&isValidQuantity(p.qty)){l.push(p)}else{g=true}}if(g||l.length===0){var f=$("<span>"+localizedStrings.MINICART_ERROR_2+"</span>").text();alert(f)}else{for(i=0;i<l.length;i++){p=l[i];miniCart.addLineKey(p.sku,p.qty,p.description,p.price,p.size,p.assayID,p.assayName,p.purity,p.scale,"","","","","","");a.addProduct(p.sku,p.price,p.qty,p.assayID)}a.cleanEndOfString();a.finalize();var h=window.cartletEnabled||false;var q;if(h){q="finalizeAddItemNoPopup"}else{q="finalizeAddItem";this.initiateAddItem()}var j=miniCart.MiniCartToJSON("","ADD");var c=window.getCookie("newCart");$(document).trigger("addToCartBegin");miniCart.cartRequest=j;if(c){var m;if(j){try{m=JSON.parse(j)}catch(n){console.log(n)}}this.newAddToCart(m)}if(!c){var d=this.createRequestURL("AddToCart","miniCart."+q,miniCart.jsessionid,miniCart.cartKey);d+="&JSONObject="+encodeURIComponent(j);miniCart.requestJSON(d)}b=true}}};MiniCart.prototype.newAddToCart=function(b){var c={cartName:"Cart",countryCode:_lt.user.displayIso,languageCode:_lt.user.displayLang,lineItems:b.lineItems};var d=window.getCookie("cartId");if(!!d){c.cartId=d}var a=this.createNewRequestURL();$.ajax({headers:{"Content-Type":"application/json; charset=utf-8"},url:a,type:"POST",method:"POST",data:JSON.stringify(c),success:function(e){var f=e.data.cartId;window.setCookie("cartId",f);viewMiniCart(true)},error:function(e){console.log("Item not added to cart",e);$(document).trigger("minicartError")}})};var newCart=window.getCookie("newCart");function viewMiniCart(){var a=window.cartletEnabled||false;var b=window.getCookie("cartId");$.ajax({headers:{"Content-Type":"application/json","Cache-Control":"No-Cache"},url:"/api/store/carts/"+b+"/minicart",method:"GET",success:function(c){var d=c.data;if(a){d.newCart=true;miniCart.finalizeAddItemNoPopup(d)}else{miniCart.finalizeAddItem(d)}},error:function(c){console.log("minicart view cart response not found",c);$(document).trigger("minicartError")}})}function getMiniCartDetails(){var a=window.getCookie("cartId");$.ajax({headers:{"Content-Type":"application/json","Cache-Control":"No-Cache"},url:"/api/store/carts/"+a+"/minicart",method:"GET",success:function(b){var c=b.data;miniCart.JSONToMiniCart(c);miniCart.showCart()},error:function(b){console.log("minicart view cart response not found",b);$(document).trigger("minicartError")}})}MiniCart.prototype.addToCart=function(f,g){var b="";if(f!=undefined&&f!=""){b=f}if(this.getFormValues(b,g)){var d=window.cartletEnabled||false;var l;if(d){l="finalizeAddItemNoPopup"}else{l="finalizeAddItem";this.initiateAddItem()}var h=miniCart.MiniCartToJSON("","ADD");var a=window.getCookie("newCart");$(document).trigger("addToCartBegin");miniCart.cartRequest=h;if(a){var j;if(h){try{j=JSON.parse(h)}catch(k){console.log(k)}}this.newAddToCart(j)}if(!a){var c=this.createRequestURL("AddToCart","miniCart."+l,miniCart.jsessionid,miniCart.cartKey);c+="&JSONObject="+encodeURIComponent(h);miniCart.requestJSON(c)}}};MiniCart.prototype.addToCartAjax=function(h,d,k){function g(q){var r=window.location.host.replace(/(.*)\.thermofisher.com/,"$1");if(r.search(/commerce/)!==-1||r.search(/cbdev/)!==-1){var p="//"+window.location.host+"/index.cfm?fuseaction=customersite.addToCart&JSESSIONID="+miniCart.jsessionid;return p}else{if(r.search(/www/)!==-1){var e=a(q);var p=e[0];return p}else{throw"You must be on a thermofisher.com subdomain to be making add to cart calls."}}}function n(p){var e=a(p);return e[1]}function a(p){if(p.match(/\?/g).length!==1){throw"there is more than one '?' character in the string "+p+" this function assumes there is only one '?' so that it can split the url and the parameters"}var e=p.split("?");return e}function l(){var q=window.location.hostname;var e=[/www\..*\.lifetechnologies\.com/,/commerce\..*\.lifetechnologies\.com/];for(var p=0;p<e.length;p++){if(q.search(e[p])!==-1){return true}}return false}if(l===false){throw window.location.hostname+" is not a valid hostname"}if(typeof d==="undefined"){d="miniCart.finalizeAddItem"}var c="";if(h!=undefined&&h!=""){c=h}if(this.getFormValues(c,k)){this.initiateAddItem();var j=miniCart.MiniCartToJSON("","ADD");var b=window.getCookie("newCart");$(document).trigger("addToCartBegin");miniCart.cartRequest=j;if(b){var m;if(j){try{m=JSON.parse(j)}catch(o){console.log(o)}}this.newAddToCart(m)}if(!b){var f=this.createRequestURL("AddToCart",d,miniCart.jsessionid,miniCart.cartKey);f+="&JSONObject="+encodeURIComponent(j);miniCart.requestAjax(g(f),n(f))}}};MiniCart.prototype.removeItem=function(c,d){miniCart.showStatus("remove");var b=miniCart.MiniCartToJSON(d,"REMOVE");var a=this.createRequestURL("DeleteLineItems","miniCart.finalizeRemoveItem",miniCart.jsessionid,miniCart.cartKey);a+="&JSONObject="+encodeURIComponent(b);miniCart.requestJSON(a);return false};MiniCart.prototype.requestAjax=function(url,params){$.ajax({type:"POST",url:url,data:params,success:function(json){eval(json)}})};MiniCart.prototype.createRequestURL=function(b,f,e,d){var a=new MiniCartRequest();a.operation=b;a.callback=f;a.jsessionid=(e!=""||!isUndefined(e))?e:"";a.cartKey=(d!=""||!isUndefined(d))?d:"";var c="";c=a.protocol+"//"+a.host+"/"+a.language+"/"+a.country+"/"+a.entryPoint+"/"+a.partner;if(a.jsessionid!=""){c+=";jsessionid="+a.jsessionid}c+="?cmd="+a.command+"&operation="+a.operation;if(a.cartKey!=""){c+="&cartKey="+a.cartKey}if(a.callback!=""){c+="&callback="+a.callback}if(getIsLoggedIn()){c+="&li=1"}c+="&randnum="+Math.floor(Math.random()*999999999999);return c};MiniCart.prototype.createNewRequestURL=function(){var b=new CartRequest();var a="";a=b.protocol+"//"+b.host+"/"+b.addCartApi;return a};MiniCart.prototype.MiniCartToJSON=function(b,a){if("REMOVE"==a){return this.RemoveFromCartJSON(b)}else{return this.AddToCartJSON()}};MiniCart.prototype.RemoveFromCartJSON=function(b){var a="{";a+='lineKey:"'+b+'"';a+="}";a="{itemList:["+a+"]}";return a};MiniCart.prototype.AddToCartJSON=function(){var c="";var b=miniCart.itemLine;b=b.reverse();for(var d=0;d<b.length;d++){var f=b[d];var e="{";e+='"quantity":"'+f.quantity+'"';e+=',"lineNo":"'+f.lineNo+'"';e+=',"parentLineNo":"'+f.parentLineNo+'"';e+=',"product":{';e+='"sku":"'+f.SKU+'"';e+=',"productSize":"'+f.size+'"';e+=',"description":""';e+=',"productAttributes":{';e+='"id":"'+f.assayID+'"';e+=',"name":"'+f.assayName+'"';e+=',"purity":"'+f.purity+'"';e+=',"scale":"'+f.scale+'"';e+=',"baseLineSku":"'+f.baseLineSku+'"';e+=',"ratePlanId":"'+f.ratePlanId+'"';e+=',"ratePlanName":"'+f.ratePlanName+'"';e+=',"ratePlanCharges":[{';e+='"id":"'+f.productRateChargeId+'"';e+=',"billingPeriod":"'+f.billingPeriod+'"';e+="}]";e+="}";e+="}";e+="},";c+=e}c=c.substring(0,c.length-1);var a='"cartKey":"';if(this.cartKey){a+=this.cartKey}a+='"';c=a+',"lineItems":['+c+"]";c="{"+c+"}";return c};MiniCart.prototype.setAddToCartSuccessCallback=function(a){if(typeof a!=="function"){throw"Add to cart success callback must resolve to a function"}else{this.addToCartCallback=a}};MiniCart.prototype.executeAddToCartSuccessCallback=function(b){if(!!window.cartletEnabled){var a={};a.cartData=b;a.cartRequest=miniCart.cartRequest;$(document).trigger("addToCartComplete",a)}if(typeof this.addToCartCallback==="function"&&this.hasError===false){this.addToCartCallback(b)}};MiniCart.prototype.setLoadCartSuccessCallback=function(a){if(typeof a!=="function"){throw"Load cart success callback must resolve to a function"}else{this.loadCartCallback=a}};MiniCart.prototype.executeLoadCartSuccessCallback=function(){if(typeof this.loadCartCallback==="function"&&this.hasError===false){this.loadCartCallback()}};MiniCart.prototype.initiateAddItem=function(a){scroll(0,0);this.showStatus("add");this.showCart(true)};MiniCart.prototype.refreshCartTotals=function(){return};MiniCart.prototype.showCart=function(c){if($("#miniCartHeaderTotalItems").html()!==""){hideOpenHeaderPanels();if(!c){c=false}if(!this.loaded&&!this.status){this.loadCart();return false}if(this.visible&&c){this.renderCartHtml();$("#miniCart").show();this.visible=true;this.toggleOverlay();this.fixScroll()}else{if(this.visible){this.hideCart()}else{if(this.totalItems()>=1||this.hasError||c){this.renderCartHtml();a();b();this.visible=true;this.toggleOverlay();this.fixScroll()}}}function b(){$(".minicart-toggle").addClass("active");$("#miniCart").show()}function a(){hideOpenHeaderPanels()}}};MiniCart.prototype.fixScroll=function(){var a=$("#minicart-items");if(a.length<=0||a==undefined){return}if(a[0].scrollHeight>a.height()){$(a).css("margin-right","10px")}else{$(a).css("margin-right","15px")}};MiniCart.prototype.hideCart=function(){this.removeCloseCartOverlay();$("#miniCart").hide();$(".minicart-toggle").removeClass("active");this.visible=false;this.toggleOverlay()};MiniCart.prototype.removeCloseCartOverlay=function(){$("#minicart-overlay").remove()};MiniCart.prototype.toggleOverlay=function(){return};MiniCart.prototype.showStatus=function(a){switch(a){case"add":this.statusMessage=localizedStrings.MINICART_MESSAGE_1;this.status="add";break;case"loading":this.statusMessage=localizedStrings.PROCESSING_MESSAGE;this.status="load";break;default:this.statusMessage=localizedStrings.MINICART_MESSAGE_2;this.status="remove"}this.renderStatus()};MiniCart.prototype.renderStatus=function(){if(this.status){$('[data-omni-action="Add to cart"]').attr("disabled","");$('[data-omni-action="add-to-cart"]').attr("disabled","");$(".commerce-button").attr("disabled","");$("#minicart-error-message").hide();if(this.statusMessage){$("#minicart-spinner-string").html(this.statusMessage)}$("#minicart-spinner").show()}else{$("#minicart-spinner").hide();$('[data-omni-action="Add to cart"]').removeAttr("disabled");$('[data-omni-action="add-to-cart"]').removeAttr("disabled");$(".commerce-button").removeAttr("disabled")}};MiniCart.prototype.hideStatus=function(){this.status="";this.statusMessage="";this.renderStatus()};MiniCart.prototype.loadErrorHandler=function(){this.error=localizedStrings.MINICART_ERROR_3;this.hideStatus();this.showCart(true)};MiniCart.prototype.renderCartHtml=function(){var a=window.getCookie("newCart");if(!!a){var e='<div id="miniCartPositioner"><div id="miniCart" class="minicart active"><div id="minicart-wrapper"><div class="new-minicart-right"><div id="minicart-summary-header"><strong></strong></div><div class="new-minicart-summary" id="minicart-summary-content"><div class="minicart-left-cell minicart-subtotal "></div><div class="minicart-right-cell minicart-price-details"><span class="minicart-currency"></span><span class="minicart-price"></span><span class="minicart-sign-in"></span></div></div><a class="btn btn-featured view-cart" id="new-minicart-checkout-button"></a></div><div id="minicart-left"><div id="minicart-header"><strong><span id="minicart-added-prefix"></span><span id="minicart-cart-name"></span><span id="minicart-added-suffix"></span></strong>&nbsp;<span id="minicart-change-link"></span></div><div id="minicart-items"><div class="minicart-row" id="minicart-items-header"><div class="minicart-left-cell"><strong></strong></div><div class="minicart-middle-cell"><strong></strong></div><div class="minicart-right-cell"><strong></strong></div></div><div id="minicart-items-rows"></div></div></div><div id="minicart-spinner" class="mini-cart-spinner"><div class="minicart-spinner-container"><img alt="..." src="/shared-static/images/global/animeloader.gif"/><span id="minicart-spinner-string" style="display:block;"></span></div></div></div></div></div>';var f=$("#miniCartContainer");f.html(e);var j=this.generateCheckoutLink();$("a#new-minicart-checkout-button").attr("href",j).html(localizedStrings.VIEW_CART);$("#minicart-added-prefix").html(localizedStrings.MINICART_CART_NAME_LABEL_1+"&nbsp;");d();this.updateItemCountInHeader();this.renderCartItemsHtml();function d(){$("#minicart-summary-header strong").html(localizedStrings.MINICART_SUMMARY);var o=miniCart.cartName;if(o.length>10){o=o.substr(0,10)+"..."}$("#minicart-cart-name").html(o);var m=$("#minicart-summary-content");var k=$("#minicart-your-price");var l=$("#minicart-change-link");var n=miniCart.cartSubTotal;if(miniCart.isAnonymous){l.html("");$(".minicart-subtotal",m).html(localizedStrings.YOUR_PRICE);$(".minicart-sign-in",m).html("<a href='"+miniCart.signInUrl+"'>"+localizedStrings.SIGN_IN+"</a>")}else{l.html("");$(".minicart-subtotal",m).html(localizedStrings.YOUR_PRICE);$(".minicart-currency",m).html(localizedStrings.CURRENCY);$(".minicart-price",m).html(n)}}}if(!a){var e='<div id="miniCartPositioner"><div id="miniCart" class="minicart active"><div id="minicart-wrapper"><div id="minicart-right"><div id="minicart-mobile-toggle" class="header-icon-toggle" mc-omni-action="mobile|close"></div><div id="minicart-summary-header"><strong></strong></div><div id="minicart-summary-content"><div class="minicart-row" id="minicart-subtotal"><div class="minicart-left-cell"></div><div class="minicart-right-cell"></div></div><div class="minicart-row" id="minicart-your-price"><div class="minicart-left-cell"></div><div class="minicart-right-cell"></div></div></div><hr/><a class="button commerce-button btn-commerce minicart-button" id="minicart-checkout-button" mc-omni-action="View cart & checkout"></a></div><div id="minicart-left"><div id="minicart-header"><strong><span id="minicart-added-prefix"></span><span id="minicart-cart-name"></span><span id="minicart-added-suffix"></span></strong>&nbsp;<span id="minicart-change-link"></span></div><div id="minicart-items"><div class="minicart-row" id="minicart-items-header"><div class="minicart-left-cell"><strong></strong></div><div class="minicart-middle-cell"><strong></strong></div><div class="minicart-right-cell"><strong></strong></div></div><div id="minicart-error-message" class="minicart-error alert alert-error error-alert" style="display: none;"></div><div id="minicart-items-rows"></div></div></div><div id="minicart-spinner" class="mini-cart-spinner"><div class="minicart-spinner-container"><img alt="..." src="/shared-static/images/global/animeloader.gif"/><span id="minicart-spinner-string" style="display:block;"></span></div></div></div></div></div>';var f=$("#miniCartContainer");f.html(e);var j=this.generateCheckoutLink();var g=$("#myaccount-button").attr("href");var b;if(getIsLoggedIn()&&!getIsB2B()&&(_lt.user.displayType!="cmgtpscms")){b='(&nbsp;<a mc-omni-action="Change cart" href="'+document.location.protocol+"//"+environmentURL.COMERGENTSERVER+'/en/US/direct/lt?cmd=WorkspaceActiveOILListRequest">'+localizedStrings.CHANGE_CART+"</a>&nbsp;)"}c();this.updateItemCountInHeader();this.setCartKey(miniCart.cartKey);this.renderCartItemsHtml();this.renderStatus();f.find("a[mc-omni-action]").click(function(){var k=new Ominiture();var l=$(this).attr("href");var m=$(this).attr("mc-omni-action");k.finalizeGeneralAction(m);setTimeout(function(){document.location=l},500);return false});f.find("#minicart-mobile-toggle").click(function(){miniCart.hideCart();$(".content, .MainParsys, #pdp-content, .globalFooter, .footer").show()});function h(){return(getCookie("CK_LANG_CODE")==="ja")}function c(){$("#minicart-summary-header strong").html(localizedStrings.MINICART_SUMMARY);var o=miniCart.cartName;if(o.length>10){o=o.substr(0,10)+"..."}$("#minicart-cart-name").html(o);var m=$("#minicart-subtotal");var k=$("#minicart-your-price");var l=$("#minicart-change-link");var n=miniCart.cartSubTotal;if(miniCart.isHidePricing){n="&mdash;"}if(n!="***"&&n!="-"&&n!=""&&n!="&mdash;"){n+="&nbsp;<span class='minicart-currency'>"+miniCart.currencySymbol+"</span>"}if(miniCart.isAnonymous){l.html("");$(".minicart-left-cell",m).html(localizedStrings.SUBTOTAL+":&nbsp;");$(".minicart-right-cell",m).html(n);$(".minicart-left-cell",k).html(localizedStrings.YOUR_PRICE+":&nbsp;");if(g){$(".minicart-right-cell",k).html("<a mc-omni-action='Sign in' href='"+g+"'>"+localizedStrings.SIGN_IN+"</a>")}else{$(".minicart-right-cell",k).html("")}}else{l.html(b);if(n){$(".minicart-right-cell",k).html(n);$(".minicart-left-cell",k).html(localizedStrings.YOUR_PRICE+":&nbsp;")}else{$(".minicart-right-cell",k).html("");$(".minicart-left-cell",k).html("")}}$("a#minicart-checkout-button").attr("href",j).html(localizedStrings.VIEW_CART);$("#minicart-wait-string").html(localizedStrings.MINICART_MESSAGE_1);if(h()){$("#minicart-added-suffix").html("&nbsp;"+localizedStrings.MINICART_CART_NAME_LABEL_1)}else{$("#minicart-added-prefix").html(localizedStrings.MINICART_CART_NAME_LABEL_1+"&nbsp;")}}}};MiniCart.prototype.renderCartItemsHtml=function(){var w=$("#minicart-items-rows");w.empty();var d=$("#minicart-items-header");$(".minicart-left-cell strong",d).html(localizedStrings.MINICART_PRODUCT);$(".minicart-middle-cell strong",d).html(localizedStrings.QUANTITY);$(".minicart-right-cell strong",d).html(localizedStrings.TOTAL);if(miniCart.error){$("#minicart-error-message").html(miniCart.error).show()}var k="";var c=window.getCookie("newCart");if(!!c){var o=this.itemList;for(var s=0;s<o.length;s++){var v=o[s];var u="";k+="<div class='minicart-row'>";k+="<div class='minicart-left-cell'>";if(v){k+="<a class='minicart-product-link' href='"+v.catalogUrl+"'>"}k+=v.catalogTitle;if(v){k+="</a>"}k+="<div>";if(v.catalogNumber){k+=localizedStrings.CATALOG_NUMBER+"&nbsp;"+v.catalogNumber}k+="</div>";k+="</div>";k+="<div class='minicart-middle-cell'>";k+=v.quantity;k+="</div>";if(v.priceAccess=="ORDERABLE"&&!miniCart.isAnonymous){if(v.listPriceTotal==v.itemSubTotal){k+="<div class='minicart-right-cell'>"}else{k+="<div class='minicart-right-cell minicart-strikethrough'>"}k+=localizedStrings.LIST_PRICE+":&nbsp;"+v.listPriceTotal;k+="</div><br>";k+="<div class='minicart-right-cell'>";k+=localizedStrings.YOUR_PRICE+":&nbsp;"+v.itemSubTotal;k+="</div>"}if(v.priceAccess=="ORDERABLE"&&miniCart.isAnonymous){k+="<div class='minicart-right-cell'>";k+=localizedStrings.LIST_PRICE+":&nbsp;"+v.listPriceTotal;k+="</div>"}if(v.priceAccess=="CONTACTUS"){k+="<div class='minicart-right-cell'>";k+="<a class='minicart-product-link' href='"+v.priceAccessLink+"'>";k+=localizedStrings.CONTACT_US;k+="</a>";k+="</div>"}if(v.priceAccess=="RFQ"){k+="<div class='minicart-right-cell'>";k+="<a class='minicart-product-link' href='"+v.priceAccessLink+"'>";k+=localizedStrings.RFQ;k+="</a>";k+="</div>"}if(v.priceAccess=="LearnWhereToBuy"){k+="<div class='minicart-right-cell'>";k+="<a class='minicart-product-link' href='"+v.priceAccessLink+"'>";k+=localizedStrings.LEARN_WHERE_TO_BUY;k+="</a>";k+="</div>"}if(v.priceAccess=="No Price"){k+="<div class='minicart-right-cell'>";k+=localizedStrings.LIST_PRICE+":***";k+="</div>"}if(v.priceAccess=="PVNO"){k+="<div class='minicart-right-cell'>";k+=localizedStrings.LIST_PRICE+":&nbsp;"+v.listPriceTotal;k+="</div>";k+="<div class='minicart-right-cell'>";k+="<a class='minicart-product-link' href='"+v.priceAccessLink+"'>";k+="&nbsp;("+localizedStrings.CONTACT_US+")";k+="</a>";k+="</div>"}if(v.priceAccess=="DSVP"){k+="<div class='minicart-right-cell'>";k+="<a class='minicart-product-link' href='"+v.priceAccessLink+"'>";k+=localizedStrings.SIGN_IN;k+="</a>";k+="</div>"}k+="</div>"}}if(!c){var o=this.itemList;for(var s=0;s<o.length;s++){var v=o[s];var u="";k+="<div class='minicart-row'>";k+="<div class='minicart-left-cell'>";if(v.product.URL){k+="<a class='minicart-product-link' mc-omni-action=\""+v.product.sku+" | View\" href='"+v.product.URL+"'>"}k+=v.product.description;if(v.product.URL){k+="</a>"}var f=v.attributes.length;for(var r=0;r<f;r++){var l=v.attributes[r];if(l.isDisplay){var y=l.key,z=l.name,p=l.value;if(p){if(y.toLowerCase()=="billingperiod"){if(v.price.yourPrice&&v.price.yourPrice.value!="***"){u=p}}else{k+='<br /><strong class="minicart-attribute-'+y+'">'+z+":</strong> "+p}}}}k+="</div>";k+="<div class='minicart-middle-cell'>";k+=v.quantity;k+="</div>";var t="&nbsp;<span class='minicart-currency'>"+miniCart.currencySymbol+"</span>";if(!v.price.yourPrice){v.price.yourPrice={value:"",URL:""}}if(!v.price.listPrice){v.price.listPrice={value:"",URL:""}}if(!v.price.onlinePrice){v.price.onlinePrice={value:"",URL:""}}var q=v.price.listPrice.value;var m=v.price.yourPrice.value;var h=v.price.onlinePrice.value;var x=v.price.listPrice.URL;var e=v.price.yourPrice.URL;var a="";var g="";var n="";k+="<div class='minicart-right-cell price-group";if(m){k+=" price-panda-called"}if(h){k+=" price-web-called"}k+="'>";function b(E,B,j,D,C){var A="";if(C){A+='<span class="minicart-strikethrough price-empty">'}A+='<span class="minicart-'+D+"-price";A+='">';switch(D){case"list":A+=localizedStrings.LIST_PRICE;break;case"your":A+=localizedStrings.YOUR_PRICE;break;case"web":A+=localizedStrings.WEB_PRICE;break}if(j){A+='<a mc-omni-action="'+E+" | Support Link | "+B+'" href="'+j+'">'}A+=":&nbsp;";if(!j&&B!="***"&&B!="-"){if(C||(h&&D=="list")){A+=B+""+t}else{A+='<span class="minicart-price price-'+D+'"><span class="price-amount">'+B+"</span>"+t+"</span>"}}else{A+=B}if(j){A+="</a>"}A+=" </span>";if(C){A+="</span>"}return A}if(this.isHidePricing){a+="&mdash;";g=""}else{if(q&&!e&&!(q=="-"&&h)&&!((x||q=="***")&&m)){a+=b(v.product.sku,q,x,"list",!!m||!!h)}if(m){g+=b(v.product.sku,m,e,"your",!!h)}if(h){n+=b(v.product.sku,h,"","web")}}k+=a+g+n;k+=u;k+="</div>";k+="</div>"}}w.html(k)};MiniCart.prototype.updateItemCountInHeader=function(c){var b=$("#miniCartHeaderTotalItems");var a=b.parent().find(".icon");if(c){this.totalQuantity=c}else{if(!this.loaded){var f=getCookie("MiniCartTotalItems");if(!f){b.html("");a.addClass("cart-icon-empty").removeClass("cart-icon-full");setTimeout(delayLoadCart,0);return false}else{miniCart.totalQuantity=f}}}var d=999;var e=this.totalItems();if(e>0){a.removeClass("cart-icon-empty");b.removeClass("hidden").addClass("cart-items-number");if(e>d){b.html(d);a.addClass("cart-icon-full");b.addClass("cart-items-number").removeClass("hidden")}else{b.html(e);a.removeClass("cart-icon-full")}}else{b.html("");a.removeClass("cart-icon-full");a.addClass("cart-icon-empty");b.addClass("hidden").removeClass("cart-items-number")}};MiniCart.prototype.resetDisplay=function(){this.loaded=false;this.totalQuantity=0;this.cartKey=getCookie("CartKey");$("#miniCart").hide();this.updateItemCountInHeader()};function Ominiture(){var b={};b.events="AddedToCart";var a=miniCart.currencySymbol;if(!a){a=getCookie("CK_CURRENCY_CODE")}if(a){b.currencyCode=a.toLowerCase()}if(document.location.toString().indexOf("/search/results")!=-1){b.events="AddedToCart,event14,event15"}this.url="";this.additionalOmniParameters=null;this.addProduct=function(f,c,d,e){if(d){d=parseInt(d)}if(!d){d=0}if(!c){c=0}else{c=c.replace(/\,/g,"")}if(e&&e!=="null"){this.url+="assay-"+e+";"+f+";"+d+";"+c+","}else{this.url+="catalog product;"+f+";"+d+";"+c+","}};this.cleanEndOfString=function(){if(this.url&&this.url.charAt(this.url.length-1)==","){this.url=this.url.substring(0,this.url.length-1)}};this.finalize=function(d){b.obj=d;b.cartKey=miniCart.cartKey;b.linkType="o";b.linkName="Add To Cart";b.products=this.url;if(!miniCart.cartKey||parseInt("0"+miniCart.totalQuantity)==0){b.events+=", CreateCart"}if(!!this.additionalOmniParameters){if(!!this.additionalOmniParameters.event){b.events+=", "+this.additionalOmniParameters.event}if(!!this.additionalOmniParameters.data){for(var c in this.additionalOmniParameters.data){if(!b[c]){b[c]=this.additionalOmniParameters.data[c]}}}}_lt.tracking.trackPageEvent(b)};this.finalizeGeneralAction=function(d){var c={};c.cartKey=miniCart.cartKey;c.prop66="MiniCart | "+d;c.eVar66=c.prop66;c.prop67=c.prop66;c.eVar67=c.prop66;_lt.tracking.trackPageEvent(c)}}function isUndefined(a){if(a===undefined){return true}}function nameExists(b,c){var a=b.name.toLowerCase();if(a.indexOf(c.toLowerCase())!==-1){return true}}function hasValue(a){if(a.value!==""&&!isUndefined(a.value)){return true}}function compareCookieValueToJSON(a,b){return a===b}function deleteCartCookies(){setCookieSessionExpire("MiniCartTotalItems","");setCookieSessionExpire("CartKey","")}function isValidQuantity(a){return !(isNaN(a)||a<1)}function isICard(a){return}function delayLoadCart(){miniCart.loadCart()}function displayMiniCartFetched(a){miniCart.JSONToMiniCart(a);miniCart.updateItemCountInHeader()}function displayMiniCart(a){miniCart.JSONToMiniCart(a);miniCart.updateItemCountInHeader();miniCart.showCart()}function setEventHandlers(){$("#addToCart").click(function(){miniCart.addToCart()})}function setEventHandlersQ5(a,b){return}MiniCart.prototype.finalizeAddItem=function(a){this.finalizeAddItemInternal(a,false)};MiniCart.prototype.finalizeAddItemNoPopup=function(a){this.finalizeAddItemInternal(a,true)};MiniCart.prototype.finalizeAddItemInternal=function(b,a){this.JSONToMiniCart(b);this.updateItemCountInHeader();this.clearQuantities();if(!a){this.hideStatus();setTimeout("miniCart.showCart(true);",250)}this.executeAddToCartSuccessCallback(b)};MiniCart.prototype.finalizeRemoveItem=function(a){this.JSONToMiniCart(a);this.updateItemCountInHeader();this.hideStatus();this.toggleOverlay();if(this.totalItems()<1&&!this.hasError){this.hideCart()}else{setTimeout("miniCart.showCart(true);",250)}};MiniCart.prototype.goCheckout=function(b){var c=this.generateCheckoutLink();if(c){this.showStatus("loading");var a=new Ominiture();a.finalizeGeneralAction("View cart & checkout");setTimeout(function(){document.location=c},500)}else{if(b!==false){this.setLoadCartSuccessCallback(function(){this.goCheckout(false)});this.loadCart()}}};MiniCart.prototype.generateCheckoutLink=function(){var c=window.getCookie("newCart");var a;if(!!c){a=document.location.origin+"/store/cart/"}if(!c){var b=this.cartKey;if(!b){b=getCookie("CartKey")}if(!b){return false}if(!miniCart.isAnonymous){if(getIsB2B()){a=environmentURL.COMERGENTSERVERSECURE+localizedLink.B2B_CHECK_OUT_LINK+b}else{if(getDisplayType()=="cmgtsc"&&(getCookie("scShipType").toLowerCase()=="sc")){a=environmentURL.COMERGENTSERVERSECURE+localizedLink.LIGGED_IN_CHECKOUT_LINK_SCMS+b}else{a=environmentURL.COMERGENTSERVERSECURE+localizedLink.LIGGED_IN_CHECKOUT_LINK+b}}}else{a=environmentURL.COMERGENTSERVERSECURE+localizedLink.ANONYMOUS_CHECKOUT_LINK+b}}return a};MiniCart.prototype.setCartKey=function(a){if(a){this.cartKey=a;if(!this.isAnonymous){if(getIsB2B()){$("#manageCartLink").attr("href",environmentURL.COMERGENTSERVERSECURE+localizedLink.B2B_MANAGE_CART_LINK+a)}else{$("#manageCartLink").attr("href",environmentURL.COMERGENTSERVERSECURE+localizedLink.LOGGED_IN_MANAGE_CART_LINK+a)}}else{$("#manageCartLink").attr("href",environmentURL.COMERGENTSERVERSECURE+localizedLink.ANONYMOUS_MANAGE_CART_LINK+a)}$("#checkOutLink").attr("href",this.generateCheckoutLink())}};MiniCart.prototype.clearQuantities=function(){$("form[name=productForm] input, form[name=csform0] input").each(function(){if(nameExists(this,"qty")&&!isICard(this)){if(hasValue(this)){this.value=""}}});miniCart.itemLine=[]};MiniCart.prototype.getFullEditUrl=function(a){return};MiniCart.prototype.getProductDetailUrl=function(a){return};MiniCart.prototype.getFormValues=function(b,c){var d="productForm";if(b!=undefined&&b!=""){d=b}var j=false;var e=0;var x=0;var h=0;var n,r,s,o;var C=new Ominiture();C.additionalOmniParameters=c;var p,y,z,A;var t;var f;var k="";var w;var m;var a="";var v="";$("#"+d+" input").each(function(D){if(nameExists(this,"qty")){t=0;if(this.value>0&&this.value%1==0){h=this.value;e++;j=true}else{if(this.value!=""){x++}}}if(j==true){t++;n=nameExists(this,"sku")?this.value:n;o=nameExists(this,"size")?this.value:o;s=nameExists(this,"description")?this.value:s;r=nameExists(this,"price")?this.value:r;p=nameExists(this,"assayID")?this.value:p;y=nameExists(this,"assayName")?this.value:y;z=nameExists(this,"purity")?this.value:z;A=nameExists(this,"scale")?this.value:A;if(t%10==9&&t!=1){if(!isValidQuantity(h)&&h!=""){errorSkus+=n+","}else{if(h!=""){miniCart.addLineKey(n,h,s,r,o,p,y,z,A,"","","","","","");C.addProduct(n,r,h,p)}}h="",n="",r="",s="",o="";p="",y="",z="",A="";j=false}}});var l=0;var B=1;var q=false;$("#"+d+" .ddsubscription , #"+d+" .cbsubscription").each(function(D,E){h="1";q=true;if($(this).hasClass("cbsubscription")&&$(this).is(":checked")&&nameExists(this,"addOnProductGroup")){l++;f=$(this).attr("rate-plan-id");w=$(this).attr("rate-plan-charge-id");k=$(this).attr("rate-plan-name");v=$(this).attr("rate-plan-billing-period");a=$(this).attr("base-sku-name");n=$(this).attr("sku-name");miniCart.addLineKey(n,h,s,r,o,p,y,z,A,f,k,w,m,a,v,l,B);C.addProduct(n,r,h,p)}else{if($(this).hasClass("ddsubscription")&&$("option:selected",this).length>0){l++;f=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-id"):f;w=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-charge-id"):w;k=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-name"):k;v=nameExists(this,"Subscription")?$("option:selected",this).attr("rate-plan-billing-period"):v;n=$(this).attr("sku-name");miniCart.addLineKey(n,h,s,r,o,p,y,z,A,f,k,w,m,a,v,l);C.addProduct(n,r,h,p)}}h="",n="",r="",s="",o="";p="",y="",z="",A="",f="",k="",w="",v=""});if(q||(e>0&&x==0)){var u=$("#"+d);C.cleanEndOfString();C.finalize(u);return true}else{var g=$("<span>"+localizedStrings.MINICART_ERROR_2+"</span>").text();alert(g);return false}};MiniCart.prototype.addAndCheckOutCart=function(a){var d="";if(a!=undefined&&a!=""){d=a}if(this.getFormValues(d)){this.initiateAddItem();var c=miniCart.MiniCartToJSON("","ADD");var b=this.createRequestURL("AddToCart","miniCart.scmsCheckout",miniCart.jsessionid,miniCart.cartKey);b+="&JSONObject="+encodeURIComponent(c);miniCart.requestJSON(b)}};MiniCart.prototype.addAndCheckOutCartAjax=function(b,a){miniCart.addToCartAjax(b,"miniCart.scmsCheckout")};MiniCart.prototype.scmsCheckout=function(a){miniCart.JSONToMiniCart(a);this.updateItemCountInHeader();miniCart.clearQuantities();this.hideStatus();setTimeout("miniCart.showCart(true);",250);if(this.totalItems()>0&&!this.hasError){window.location.href=environmentURL.COMERGENTSERVERSECURE+localizedLink.LIGGED_IN_CHECKOUT_LINK+miniCart.cartKey}else{if(miniCart.hasError){miniCart.hideCart();miniCart.showCart()}}};$(document).ready(function(){var a=getCookie("newCart");if(!!a){console.log("NEW MINICART");instantiateNewMinicart()}else{instantiateLegacyMinicart()}instantiateLegacyMinicart()});function instantiateLegacyMinicart(){window.miniCart=new MiniCart();miniCart.jsessionid=getCookie("CartSessionID");miniCart.cartKey=getCookie("CartKey");miniCart.updateItemCountInHeader();showViewCart()}function instantiateNewMinicart(){console.log("Instantiating NEW minicart");checkAndLoadAngularIfNeeded()}function instantiateNewMinicartCss(c){var a=document.head;var b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=c;a.appendChild(b)}function checkAndLoadAngularIfNeeded(){console.log("Check angular");$(document).ready(function(){if(!!window.angular){console.log("Angular loaded");loadJS("/store/cartlet/scripts/minicart.js");instantiateNewMinicartCss("/store/cartlet/styles/cartlet.css")}else{console.log("Loading angular");loadJS("/shared-static/scripts/angular.1.1.5.js").then(function(){console.log("Angular is loaded");loadJS("/store/cartlet/scripts/minicart.js")}).then(function(){console.log("MiniCart is loaded");instantiateNewMinicartCss("/store/cartlet/styles/cartlet.css")})}})}function loadJS(a){return new Promise(function(d,c){var b=document.createElement("script");b.type="text/javascript";b.onload=d;b.onerror=c;b.src=a;document.body.appendChild(b)})};