window.performance&&window.performance.mark&&window.performance.mark("searchAutoComplete.js:blockBegin");var wwwUrl="";if(document.location.toString().indexOf("https://")!=-1){wwwUrl="https://"+environmentURL.WCMSERVER}else{wwwUrl="http://"+environmentURL.WCMSERVER}var searchAutoComplete=searchAutoComplete||{};searchAutoComplete.providers=searchAutoComplete.providers||{};searchAutoComplete.providerSelector=function(a){var d="searchAutoCompleteProviderSelector";if(navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1){d="searchAutoCompleteProviderSelectorIE78";$("html").addClass("ie8")}var h;function j(l){return l.find("."+d)}var b=false;function c(m,l){var n=a("<select id='chosenselector' class='"+d+"'></select>");n.hide();m.prepend(n);n.chosen({width:"100%",multiple:false,disable_search:true});a("#focusAreaSelector").empty();$(".chosen-container").appendTo("#focusAreaSelector");n.bind("change",function(o){if(a(window).width()>1024){setTimeout(function(){a("#suggest1").focus()},10)}});n.mouseover(function(){b=true});n.mouseleave(function(){b=false});n.change(function(o){l&&l(o.target.value);a("input[role='search']",m).trigger("focus")});return n}function f(m,l){return m.find("option[value='"+l.id+"']").length>0}function k(n,l){var m=n.find("option[value='"+l+"']");m.remove();e(n)}function i(o,n){var m=a("<option value='"+n.id+"'>"+n.name+"</option>");if(!n.group){o.append(m)}else{var l=g(o,n.group);l.append(m)}e(o)}function g(n,m){var l=n.find("optgroup[label='"+m+"']");if(l.length==0){l=a("<optgroup label='"+m+"'></optgroup>");if(m==="Product Category"){n.prepend(l);$(".searchAutoCompleteProviderSelector").hide().trigger("chosen:updated")}else{n.append(l)}}return l}function e(l){if(l.find("option").length>1){if(navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1){a("#header-typeahead-suggested").addClass("msie78Search");a("#suggest1").addClass("msie78Search")}a("#smartsearch").addClass("providers-enabled");l.trigger("chosen:updated")}else{if(navigator.appVersion.indexOf("MSIE 7.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1){a("#header-typeahead-suggested").removeClass("msie78Search");a("#suggest1").removeClass("msie78Search")}a("#smartsearch").removeClass("providers-enabled");l.hide()}}return function(l){h=a(document.getElementById(l));return{isNotMouseOver:function(){return !b},selectorExists:function(){var m=j(h);return m.length>0},createSelector:function(n,o,m){c(h,n,o,m)},addToSelector:function(n){if(!n){return}var m=j(h);if(m.length>0){if(!f(m,n)){i(m,n)}}},removeFromSelector:function(m){var n=j(h);k(n,m)},setActive:function(m){var n=j(h);n.val(m);setTimeout(function(){n.trigger("chosen:updated")},0)}}}}($);baseProvider=function(a,f,k,i,b,l,c,g,j){function e(p){var v={response:{numFound:p.length,docs:[]}};if(!!p.result&&(typeof p.result=="string")){var t;try{var t=JSON.parse(p.result)}catch(s){}if(!!t&&!!t.response&&!!t.response.docs&&!!t.response.docs.length){for(var q=0;q<t.response.docs.length;q++){var u=t.response.docs[q];var n=u.value||"";u.term=n;u.suggestion1=n}v.response.numFound=t.response.docs.length;v.response.docs=t.response.docs}}else{if(p){var w={sku:"suggestion1",term:"suggestion1",magellanUrl:"url",searchUrl:"url",title:"title",category:"title",type:"type"};for(var q=0;q<p.length;q++){var m={horizontalRegister:false};var r=p[q];for(var o in r){if(w[o]){m[w[o]]=r[o]}}if(q>0&&p[q-1].type!=m.type){m.horizontalRegister=true}v.response.docs.push(m)}}}return v}function h(m){try{m=decodeURIComponent(escape(m))}catch(n){}return m}function d(u){u=u.replace('"',"").replace('"',"");var m="Recent searches";if(window.localizedStrings&&window.localizedStrings.RECENT_SEARCHES){m=window.localizedStrings.RECENT_SEARCHES}var q={response:{docs:[{suggestion1:m}]}};if(u){var p="";if(window.atob){try{p=window.atob(u);p=h(p)}catch(t){console.log("Unable to decode recent searches cookie")}}else{var s={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(A){var D="";var x,v,y,E,w,C,B;var z=0;A=s._utf8_encode(A);while(z<A.length){x=A.charCodeAt(z++);v=A.charCodeAt(z++);y=A.charCodeAt(z++);E=x>>2;w=(x&3)<<4|v>>4;C=(v&15)<<2|y>>6;B=y&63;if(isNaN(v)){C=B=64}else{if(isNaN(y)){B=64}}D=D+this._keyStr.charAt(E)+this._keyStr.charAt(w)+this._keyStr.charAt(C)+this._keyStr.charAt(B)}return D},decode:function(A){var D="";var x,v,y;var E,w,C,B;var z=0;A=A.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(z<A.length){E=this._keyStr.indexOf(A.charAt(z++));w=this._keyStr.indexOf(A.charAt(z++));C=this._keyStr.indexOf(A.charAt(z++));B=this._keyStr.indexOf(A.charAt(z++));x=E<<2|w>>4;v=(w&15)<<4|C>>2;y=(C&3)<<6|B;D=D+String.fromCharCode(x);if(C!=64){D=D+String.fromCharCode(v)}if(B!=64){D=D+String.fromCharCode(y)}}D=s._utf8_decode(D);return D},_utf8_encode:function(x){x=x.replace(/\r\n/g,"\n");var v="";for(var y=0;y<x.length;y++){var w=x.charCodeAt(y);if(w<128){v+=String.fromCharCode(w)}else{if(w>127&&w<2048){v+=String.fromCharCode(w>>6|192);v+=String.fromCharCode(w&63|128)}else{v+=String.fromCharCode(w>>12|224);v+=String.fromCharCode(w>>6&63|128);v+=String.fromCharCode(w&63|128)}}}return v},_utf8_decode:function(x){var v="";var y=0;var w=c1=c2=0;while(y<x.length){w=x.charCodeAt(y);if(w<128){v+=String.fromCharCode(w);y++}else{if(w>191&&w<224){c2=x.charCodeAt(y+1);v+=String.fromCharCode((w&31)<<6|c2&63);y+=2}else{c2=x.charCodeAt(y+1);c3=x.charCodeAt(y+2);v+=String.fromCharCode((w&15)<<12|(c2&63)<<6|c3&63);y+=3}}}return v}};p=s.decode(u)}var o=p.split("|");for(var r=0;r<o.length;r++){var n=o[r];if(n){n=n.replace(/\+/g," ");q.response.docs.push({suggestion1:n})}}}return q}return function(m){var n={id:f,name:k,group:l,submitPath:i,typeAheadUrl:b,include:c,exclude:g,activation:j};m=a.extend(true,n,m);if(!!m.include){m.include=new RegExp(m.include,"i")}if(!!m.exclude){m.exclude=new RegExp(m.exclude,"i")}if(!!m.activation){m.activation=new RegExp(m.activation,"i")}return{id:m.id,name:m.name,group:m.group,include:m.include,exclude:m.exclude,activation:m.activation,isIncluded:function(p){var q=true;var o=false;if(this.include){q=this.include.test(p)}if(this.exclude){o=this.exclude.test(p)}return q&&!o},prepareSubmit:function(o,q,p){if(o.prepared){return}o.prepared=true;!!p&&p.preventDefault();sessionStorage.setItem("searchKeyword",q.val());sessionStorage.setItem("typeahead-kw",q.val());setTimeout(function(){if(!!q){m.submitPath=m.submitPath.replace("{keyword}",encodeURIComponent(q.val()))}m.submitPath=m.submitPath.replace("{focusAreaName}",encodeURIComponent(m.name));var r=m.submitPath.indexOf("/search/se/results?keyword=");if((r==-1)&&(m.submitPath.indexOf("navId")==-1)){if(sessionStorage.getItem("keyword")==q.val()){m.submitPath=m.submitPath.replace("&resultPage=1","");m.submitPath=m.submitPath.replace("&resultsPerPage=15","");if(sessionStorage.getItem("ct-count")!=null&&sessionStorage.getItem("ct-count")!="0"){m.submitPath=m.submitPath+"&sort="+sessionStorage.getItem("ct-sortBy")+"&resultPage="+sessionStorage.getItem("ct-rsp")+"&resultsPerPage="+sessionStorage.getItem("ct-rpp");m.submitPath=(m.id!="all-categories")?m.submitPath+"&navId="+sessionStorage.getItem("ct-navId"):m.submitPath;if(sessionStorage.getItem("ct-l1")!=""){m.submitPath+="&l1="+sessionStorage.getItem("ct-l1")}}else{if(sessionStorage.getItem("ds-count")!=null&&sessionStorage.getItem("ds-count")!="0"){m.submitPath=m.submitPath+"&resultPage="+sessionStorage.getItem("ds-rsp")+"&resultsPerPage="+sessionStorage.getItem("ds-rpp");m.submitPath=(m.id!="all-categories")?m.submitPath+"&navId="+sessionStorage.getItem("ds-navId"):m.submitPath;if(sessionStorage.getItem("docSupport.refinementQuery")!=""){m.submitPath+="&refinementQuery="+sessionStorage.getItem("docSupport.refinementQuery")}}else{if(sessionStorage.getItem("lm-count")!=null&&sessionStorage.getItem("lm-count")!="0"){m.submitPath=m.submitPath+"&resultPage="+sessionStorage.getItem("lm-rsp")+"&resultsPerPage="+sessionStorage.getItem("lm-rpp");m.submitPath=(m.id!="all-categories")?m.submitPath+"&navId="+sessionStorage.getItem("lm-navId"):m.submitPath}}}}}window.location.href=m.submitPath},300);return true},query:function(r,t){var s=3;if(_lt.displayLangMatch("ja ko zh zt")){s=1}if(r&&r.length>=s){var o=m.typeAheadUrl.replace("{keyword}",encodeURIComponent(r)).replace("{country_code}",_lt.user.displayIso);if(o.indexOf("/order/genome-database/keywordTypeAhead")!=-1){var p=/\"/g;o=o.replace(p,"%22")}a.ajax({url:o,data:{language:_lt.user.displayLang},dataType:"jsonp",success:function(q){q=e(q);t&&t(q)}})}else{t&&t({})}},seQuery:function(p,r){var q=1;if(p&&p.length>=q){var o=m.typeAheadUrl.replace("{keyword}",encodeURIComponent(p)).replace("{country_code}",_lt.user.displayIso);a.ajax({url:o,data:{language:_lt.user.displayLang},dataType:"json",success:function(s){r&&r(s)}})}else{r&&r({})}},recentSearch:function(q){var o=getCookie("CK_RECENT_SEARCHES");var p=d(o);q&&q(p)}}}};var allSourceProviderId="all-categories";searchAutoComplete.providers.allSources=new baseProvider($,allSourceProviderId,"All Categories",wwwUrl+"/search/results?query={keyword}&resultPage=1&resultsPerPage=15&autocomplete=",wwwUrl+"/search/service/typeaheadSuggestions?query={keyword}&countryCode={country_code}");var search_i18n={en:{search:"Search"},fr:{search:"Rechercher"},de:{search:"Suche"},getResource:function(c){var a=c;if(!!c){var b="en";var e;if(!!_lt&&!!_lt.user&&!!_lt.user.displayLang){e=_lt.user.displayLang||b}if(!search_i18n[e]){e=b}var d=search_i18n[e][c];if(!d){d=search_i18n[b][c]}if(!!d){a=d}}return a}};searchAutoCompleteTypeAhead=(function(ad,av,w){var A="data-omni-action";var N=200;var l=13;var L=40;var ao=38;var K=39;var al=37;var m=8;var c=46;var p=27;var C=ad("#"+av);var ax=ad("#generalSearchInput");var aE='<i id="searchRemove" class="clearable searchRemoveHide"><img src="/shared-static/images/search/x-mark-3-16.svg" alt="clear" />';ad("#suggest1").after(aE);ax.append('<div id="header-typeahead"><input type="hidden" id="typeahead-autocomplete" name="autocomplete" /><div><ul class="flyout-recent-searches"></ul></div><div class="flyout-typeahead"><div class="typeahead-terms"><ul class="typeahead-term-list"></ul></div></div></div>');var P={keyword:ad("#suggest1"),typeahead_container:ad("#header-typeahead"),term_list:ad("div.typeahead-terms",C),search_terms:ad("ul.typeahead-term-list",C),flyout:ad(".flyout-typeahead",C),recent_searches:ad(".flyout-recent-searches",C),hidden_autocomplete:ad("#typeahead-autocomplete"),submit_button:ad("#searchButton",C),form:C,input_wrapper:ax,searchRemove:ad("#searchRemove")};P.keyword.wrap('<div id="header-typeahead-input-container"></div>');P.keywordContainer=P.keyword.parent();P.keyword.attr("placeholder",search_i18n.getResource("search"));P.suggested=ad('<input id="header-typeahead-suggested" disabled autocomplete="off" />');P.keywordContainer.append(P.suggested);P.form.submit(function(i){i.preventDefault();var e=V.prepareSubmit(P.form,P.keyword,i);return !e&&!!ad.trim(P.keyword.val())});P.keyword.attr("autocomplete","off");var aj=70;var am={};var O={};var U;var r=function(){P.form.submit()};var ap;var an=true;var af=(function(e){function i(aH){P.keyword.val(T.attr("term"));if(aH){P.hidden_autocomplete.val("true")}else{P.hidden_autocomplete.remove()}P.form.submit()}return{setKeywordEntryMode:function(){U=b;r=function(){P.form.submit()}},setListNavigatorMode:function(){r=function(){i(true)}},setRecentSearchesMode:function(){v();U=z;r=function(){i(false)}}}})();var au=false;P.form.keyup(function(e){if(!au){return}U(e)});var n=null;var S=false;function v(){if(!!n){n.removeClass("active")}n=null}function z(e){if(e.keyCode===L||e.keyCode===ao){if(e.keyCode===L){if(!n||!(nextItem=n.closest("li").next().find("a")[0])){q(P.recent_searches.find("a:first")[0],0)}else{q(nextItem,0)}}else{if(!n||!(nextItem=n.closest("li").prev().find("a")[0])){q(P.recent_searches.find("a:last")[0],0)}else{q(nextItem,0)}}}else{if(e.keyCode===13){r();return}}}function b(i){if(i.keyCode===L||i.keyCode===ao){if(!n){q(P.search_terms.find("a:first")[0],0);af.setListNavigatorMode()}else{var e=null;if(i.keyCode===L){if(e=n.closest("li").nextAll().not(".typeahead-ignore").first().find("a")[0]){q(e,0);af.setListNavigatorMode()}else{q(P.search_terms.find("a:first")[0],0)}}else{if(i.keyCode===ao){if(e=n.closest("li").prevAll("li").not(".typeahead-ignore").first().find("a")[0]){q(e,0)}else{q(P.search_terms.find("a:last")[0],0)}}}}}else{if(i.keyCode==m||i.keyCode==c){an=false;if(aB()){I();i.preventDefault()}}}}var f=false;function B(i,e){if(!f){f=true;if(n){if(i){at(i)}else{at(n)}}else{aF(M||P.keyword.val(),e)}}}function ag(e){var i=false;if(e){document.dispatchEvent(new CustomEvent("searchFormSubmit",{detail:{search:{term:sessionStorage.getItem("input-keyword")}}}))}if(aB()&&!e){i=true;Q()}else{if(aB()&&e){I()}}B(null,i);setTimeout(function(){if(n&&n.attr("href")&&S){var aH=n.attr("href");window.location=aH}else{if(n&&S){af.setListNavigatorMode();r()}else{r()}}},N)}P.submit_button.click(function(e){if(!!ad.trim(P.keyword.val())){ag()}e.preventDefault();return false});var t=false;P.keyword.keyup(function(e){if(P.keyword.val()&&P.keyword.val().length>0){P.searchRemove.removeClass("searchRemoveHide")}else{P.searchRemove.addClass("searchRemoveHide")}if(!aa(e.keyCode)){return true}if(e.keyCode===ao||e.keyCode===L){return true}if(e.keyCode==l){return true}if((e.keyCode==m||e.keyCode==c)&&aB()){return true}af.setKeywordEntryMode();G(this.value)}).keydown(function(e){if(!aa(e.keyCode)){return true}switch(e.keyCode){case K:if(aB()){Q();t=true;P.keyword.addClass("suggested");return false}break;case l:if(!!ad.trim(P.keyword.val())){ag(true)}e.preventDefault();return false;case m:case c:if(t){t=false;P.keyword.removeClass("suggested")}if(aB()){return false}break}an=true;aA();I();return}).bind({paste:function(){var e=this;setTimeout(function(){G(e.value);aA()},20)},cut:function(){var e=this;setTimeout(function(){G(e.value)},20)}});function aa(e){var i=(e>47&&e<58)||e==32||e==13||(e>64&&e<91)||(e>95&&e<112)||(e==229||e==0)||(e>185&&e<193)||(e==K||e==al||e==ao||e==L)||(e==m||e==c||e==l||e==p)||(e>218&&e<223);return i}P.typeahead_container.bind("mouseout, mouseleave",function(e){!!T&&T.removeClass("active");T=null;n=null});var M;function h(){return M}function G(e,i){af.setKeywordEntryMode();e=ad.trim(e);if(!e){M="";ac();$(".dim-background").trigger("closedimbg");return false}P.searchRemove.removeClass("searchRemoveHide");if(M!==e){M=e;if(!!i){P.keyword.val(M)}k(M)}return true}function u(i){function aH(aL){var aK=RegExp("[?&]"+aL+"=([^&]*)").exec(window.location.search);return aK&&decodeURIComponent(aK[1].replace(/\+/g," "))}var aI=window.location.href.indexOf("query");var e=aH("query");var aJ=sessionStorage.getItem("typeahead-kw");if((aI!=-1&&!e)&&(typeof aJ!="undefined"&&aJ!=null)){P.keyword.val(aJ);i="";sessionStorage.setItem("searchKeyword",aJ)}af.setKeywordEntryMode();i=ad.trim(i);if(!i){M="";ac();$(".dim-background").trigger("closedimbg");return false}P.searchRemove.removeClass("searchRemoveHide");if(M!==i){M=i;P.keyword.val(M)}return true}function X(e,i){G(e,true)}function ac(){P.typeahead_container.hide();au=false}function aD(){P.recent_searches.hide();P.flyout.show();P.term_list.css("width","100%");P.typeahead_container.show();$(".dim-background").trigger("opendimbg");au=true}function d(){P.typeahead_container.hide();P.recent_searches.hide();au=false}function ak(){n=null;if(P.recent_searches.children().length>0){P.flyout.hide();P.typeahead_container.show();$(".dim-background").trigger("opendimbg");P.recent_searches.show();au=true}}function W(){return P.form.hasClass("active")}function j(){V.recentSearch(function(aJ){var aK=aJ.response.docs;if(aK.length>1){var e=['<li class="recent-searches">'+aK[0].suggestion1+"</li>"];for(var aI=1;aI<aK.length;aI++){var aH="term "+((aI%2)?"odd":"even")+"";e.push('<li class="'+aH+'"><a href="#" term="'+aK[aI].suggestion1+'"><span>',aK[aI].suggestion1,"</span></a></li>")}P.recent_searches.html(e.join(""));P.recent_searches.find(".term").click(function(){var i=ad("a",this).attr("term");aF(i,false);r();return false})}})}function k(aH){var aI=V.id+"_"+aH;var e=O[aI];var i=$("#chosenselector :selected").closest("optgroup").attr("label");sessionStorage.setItem("input-keyword",aH);ap=aI;if(!e){if(i!=="Services"){V.query(aH,function(aJ){ai(aJ,aI)})}else{V.seQuery(aH,function(aJ){g(aJ,aI)})}}else{if(i!=="Services"){ai(e)}else{g(e)}}}function ai(e,i){if(i){O[i]=e}if(!i||i==ap){if(W()){aD()}if(e&&e.response&&aG(e.response.docs)){}else{ac();$(".dim-background").trigger("closedimbg")}}else{}}function g(e,i){if(i){O[i]=e}if(!i||i==ap){if(W()){aD()}if(e.statusCode!=500&&e.suggestions!=null){az(e.suggestions)}else{ac();$(".dim-background").trigger("closedimbg")}}else{}}function s(){return P.suggested.val()}function aq(e){P.suggested.val(""+e);P.suggested.addClass("active")}function I(){P.suggested.val("");P.suggested.removeClass("active")}function aB(){return P.suggested.hasClass("active")}function Q(){var e=s();P.keyword.val(e);G(e);I()}function aG(aL){var aK=h();var aH=[];var aO,e;var aM;v();var aN="in";if(window.localizedStrings&&window.localizedStrings.inText){aN=window.localizedStrings.inText}if(aL.length>0){var aJ="Search suggestions";if(window.localizedStrings&&window.localizedStrings.searchSuggestions){aJ=window.localizedStrings.searchSuggestions}aH.push('<li class="typeahead-ignore">');aH.push('<div class="search-suggestions">'+aJ+"</div>");for(var aI=0;aI<aL.length;aI++){aO=aL[aI];e=aO.suggestion1;if(aO.type=="AutoComplete"){if(e!==h()&&an){aq(e)}}else{if(!am[e]){am[e]={}}if(aL[aI].horizontalRegister){aH.push('<li class="typeahead-ignore"><span class="typeahead-hr"></span></li>')}aH.push("<li>");if(aL[aI].url){aH.push('<a class="typeahead-term" href="'+aL[aI].url+'" '+A+'="CATEGORY|'+aL[aI].title+"|"+e+'"><span class="typeahead-span">'+D(aK,e)+" "+aN+' <span class="title-text">'+aL[aI].title+"</span></span></a>")}else{if(aL[aI].title){aH.push("<a "+A+'="SKU|'+e+'" term="'+e+'" class="typeahead-term"><span class="typeahead-span">'+D(aK,e)+" &minus; "+aL[aI].title+"</span></a>")}else{aH.push("<a "+A+'="STANDARD|'+e+'" term="'+e+'" class="typeahead-term"><span class="typeahead-span">'+D(aK,e)+"</span></a>")}}aH.push("</li>")}}}if(aH.length>0){$("#header-typeahead").show();P.search_terms.html(aH.join(""))}else{$("#header-typeahead").hide()}return aH.length}function az(aL){var aN=Object.keys;if(!aN){aN=function(aQ){var aP=[];for(var aO in aQ){if(aQ.hasOwnProperty(aO)){aP.push(aO)}}return aP}}var e=h(),aJ=aN(aL),aM=[],aK;v();for(var aI=0;aI<aJ.length;aI++){aK=aL[aJ[aI]];if(aJ[aI]==="experiments"&&aL.experiments!==null){aM.push('<li class="se-type-expts"><h4 class="se-category">Service Categories</h4><ul class="se-type-list">');for(var aH=0;aH<aK.length;aH++){aM.push('<li><a class="se-type-links" href="'+aK[aH].categoryUrl+'"><span class="expts-name">'+D(e,aK[aH].name)+"</span></a></li>")}aM.push("</ul></li>")}if(aJ[aI]==="providers"&&aL.providers!==null){aM.push('<li class="se-type-providers"><h4 class="se-category">Service Providers</h4><ul class="se-type-list">');for(var aH=0;aH<aK.length;aH++){aM.push('<li><a class="se-type-links" href="'+aK[aH].targetUrl+'"><span class="providers-name">'+D(e,aK[aH].facilityName)+"</span>"+($.trim(aK[aH].address.replace(/,/g,""))!=""?'<span class="providers-address">'+aK[aH].address+"<span>":"")+"</a></li>")}aM.push("</ul></li>")}}if(aM.length>0){$("#header-typeahead").show();P.search_terms.html(aM.join(""))}else{$("#header-typeahead").hide()}return aM.length}ad("a.se-type-links").live("click",function(aH){var aI="",i="";if(ad(this).find("span.expts-name").length>0){aI=ad(this).find("span.expts-name").text();i="Service Categories"}else{if(ad(this).find("span.providers-name").length>0){aI=ad(this).find("span.providers-name").text();i="Service Providers"}}document.dispatchEvent(new CustomEvent("suggestedSearchClick",{detail:{search:{suggestedLinkName:aI,suggestedLinkType:i,term:sessionStorage.getItem("input-keyword")}}}))});ad("a.typeahead-term").live("click",function(i){document.dispatchEvent(new CustomEvent("suggestedSearchClick",{detail:{search:{suggestedLinkName:ad(this).find("span.typeahead-span").text(),suggestedLinkType:$(".search-suggestions").text(),term:sessionStorage.getItem("input-keyword")}}}))});$("#searchButton").click(function(i){document.dispatchEvent(new CustomEvent("searchFormSubmit",{detail:{search:{term:sessionStorage.getItem("input-keyword")}}}))});ad(".typeahead-term").live("click",function(aK){var aH=false;if(aB()){aH=true;Q()}var aI,i;aI=ad(this).attr("data-omni-action");if(aI.indexOf("CATEGORY")!=-1){i=aI.split("|")[2]}else{i=aI.split("|")[1]}if(typeof i!="undefined"){sessionStorage.setItem("typeahead-kw",i)}B(ad(this),aH);var aJ=this;setTimeout(function(){var e=ad(aJ).attr("href");if(!!e){window.location=e}else{af.setListNavigatorMode();r();ac()}},N);aK.stopPropagation()});var T=null;function D(e,i){var aI=new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi");var aH="<strong>"+e+"</strong>";return i.replace(aI,aH)}var E={};function q(aJ,aK,aI){if(!au){return}I();var e=aJ||this;var aH=aK||0;n=ad(e);S=(aI!="undefined")?!aI:true;var i=(function(aL,aM){return function(){if(aL!==n){return}!!T&&T.removeClass("active");T=aL.addClass("active")}})(n,n.attr("term"));if(aH){E[n.attr("term")]=setTimeout(i,aH)}else{i()}}function ab(aI,aH){var e=aH||this;var aJ;ad(e).css("text-decoration","none");var i=e.getAttribute("term");if(aJ=E[i]){clearTimeout(aJ);delete E[i]}}var aC;var Z=100;function aA(){clearTimeout(aC);P.form.addClass("active")}function R(){var e=!ay.providerSelector||ay.providerSelector.isNotMouseOver();if(e){aC=setTimeout(function(){ac();P.form.removeClass("active");$(".dim-background").trigger("closedimbg")},Z)}}ad("a.typeahead-term").live("mouseenter",function(e){q(this,aj,true)}).live("mouseleave",ab);P.recent_searches.find("a").live("mouseenter",function(e){q(this,0)}).live("mouseleave",ab);ad("body").click(function(e){if(ad(e.target).hasClass("typeahead-term")||ad(e.target).hasClass("typeahead-span")){P.typeahead_container.unbind("mouseout, mouseleave");return true}if(!ad(e.srcElement).is("#searchButton")){$search=ad(e.srcElement).closest("#header-typeahead");if(!$search.length){R();au=false}}});P.searchRemove.click(function(e){P.keyword.val("");P.suggested.val("");P.searchRemove.addClass("searchRemoveHide")});P.keyword.click(function(e){e.stopPropagation();if(au){return}if(this.value.length===0){af.setRecentSearchesMode();ak();aA()}else{af.setKeywordEntryMode();var i=h();if(i){aD();k(i)}aA()}});function aF(e,i){if(e){e=e.toLowerCase();var aH={};if(i){aH.searchDetail="AUTOCOMPLETE|true|"+e}else{aH.searchDetail="AUTOCOMPLETE|false|"+e}aH.events="SearchOccurred";aH.searchFocusArea="FOCUSAREA|"+V.id+"|"+V.name;_lt.tracking.trackPageEvent(aH)}}function at(aK){var aH=aK,i=aH.attr("href"),e=aH.attr(A);if(e){var aI=e.split("|").pop().toLowerCase();if(!i||(i.indexOf("&navID")===-1&&i.indexOf("&customgroup")===-1&&i.indexOf("&category")===-1)){var aJ={searchDetail:"TYPEAHEAD|"+e,events:"SearchOccurred",type:"e",obj:aH};aJ.searchFocusArea="FOCUSAREA|"+V.id+"|"+V.name;_lt.tracking.trackPageEvent(aJ)}}}ad("#search-mobile-button").bind("click",function(i){ad("#suggest1").focus()});var ay={getDictionary:function(){return am},getSearchHistory:function(){return O},getHighlightedTerm:function(){return T},setKeyword:X,setKeywordNoAuto:u,addProvider:function(e){if(e&&e.isIncluded(window.location.href)){if(a&&e.id){a[e.id]=e;if(ay.providerSelector){if(!ay.providerSelector.selectorExists()){ay.providerSelector.createSelector(function(i){ay.setProvider(i,true)})}ay.providerSelector.addToSelector(e)}}}},setProvider:function(e,i){if(a&&e){var aI=a[e];if(typeof aI=="undefined"){aI=a["all-categories"]}shouldLoadGuided=false;shouldLoadGuided=showHideGuided(window.location.pathname);ad("#primarySearch, #generalSearch").addClass("hidden");if(aI.id=="primary-antibodies"&&shouldLoadGuided){ad("#search-main .loading-wheel-sm").removeClass("hidden");$("#primarySearch").load("//"+environmentURL.WCMSERVER+"/order/genome-database/antibody-search-form-cq?sourcePage=global-search&subtype=primary",function(){ad("#search-main .loading-wheel-sm").addClass("hidden");ad("#primarySearch").removeClass("hidden")})}else{if(aI.id=="secondary-antibodies"&&shouldLoadGuided){ad("#search-main .loading-wheel-sm").removeClass("hidden");$("#primarySearch").load("//"+environmentURL.WCMSERVER+"/order/genome-database/antibody-search-form-cq?sourcePage=global-search&subtype=secondary",function(){ad("#search-main .loading-wheel-sm").addClass("hidden");ad("#primarySearch").removeClass("hidden")});ad("#search-main").addClass("guided-form")}else{if(aI.id=="isotype-controls"&&shouldLoadGuided){ad("#search-main .loading-wheel-sm").removeClass("hidden");$("#primarySearch").load("//"+environmentURL.WCMSERVER+"/order/genome-database/antibody-search-form-cq?sourcePage=global-search&subtype=control",function(){ad("#search-main .loading-wheel-sm").addClass("hidden");ad("#primarySearch").removeClass("hidden")})}else{ad("#generalSearch").removeClass("hidden")}}}if(!!aI){V=aI;if(ay.providerSelector){ay.providerSelector.setActive(e);if(i){an=false;if(aB()){I()}ac();n=null;af.setKeywordEntryMode();var aH=P.keyword.val();G(aH);$(".dim-background").trigger("closedimbg")}}j()}}},removeProvider:function(e){if(!a||!e){return}var aH=Object.keys;if(!aH){aH=function(aK){var aJ=[];for(var aI in aK){if(aK.hasOwnProperty(aI)){aJ.push(aI)}}return aJ}}var i=aH(a);delete a[e];ay.providerSelector.removeFromSelector(e);i=aH(a);if(V.id==e){ay.setProvider(i[0])}},setMatchedRules:function(aJ){var aH=false;if(aJ&&aJ.activation&&aJ.isIncluded(window.location.href)){aJ.matchedRules=[];var aI=aJ.activation.source.split("|");for(var e=0;e<aI.length;e++){if(aI[e]!=""){aI[e]=new RegExp(aI[e],"i");if(aI[e].test(window.location.href)){aJ.matchedRules.push({rule:aI[e]});aH=true}}}}return aH},setPrecedence:function(aL){var aK=window.location.href;var i=".*";var e="$";for(var aI=0;aI<aL.matchedRules.length;aI++){aL.matchedRules[aI].rank=aI;aL.matchedRules[aI].endingWildCard=false;aL.matchedRules[aI].endingDollar=false;aL.matchedRules[aI].matchAtEnd=false;aL.matchedRules[aI].precedenceScore=0;aL.matchedRules[aI].endIndex=0;var aJ=aL.matchedRules[aI].rule.source;if(aJ.indexOf(e,aJ.length-e.length)!==-1){aL.matchedRules[aI].rule=new RegExp(aJ.substring(0,aJ.length-e.length),"i");aL.matchedRules[aI].endingDollar=true}if(aJ.indexOf(i,aJ.length-i.length)!==-1){aL.matchedRules[aI].rule=new RegExp(aJ.substring(0,aJ.length-i.length),"i");aL.matchedRules[aI].endingWildCard=true}var aH=aK.match(aL.matchedRules[aI].rule);if(aH&&aH[0]){aL.matchedRules[aI].endIndex=((aK.indexOf(aH[0])+aH[0].length)-1);if(aL.matchedRules[aI].endIndex==aK.length-1){aL.matchedRules[aI].matchAtEnd=true}}if(aL.matchedRules[aI].matchAtEnd==true){if(aL.matchedRules[aI].endingDollar==true){aL.matchedRules[aI].precedenceScore+=100;if(aL.matchedRules[aI].endingWildCard==true){aL.matchedRules[aI].precedenceScore-=10}}if(aL.matchedRules[aI].endingWildCard==false){aL.matchedRules[aI].precedenceScore+=10}}else{if(aL.matchedRules[aI].endingWildCard==true){aL.matchedRules[aI].precedenceScore+=10}}}},rankProviders:function(aH){for(var e=0;e<aH.length;e++){aH[e].rank=e;if(aH[e].matchedRules.length>1){aH[e].matchedRules.sort(function(aI,i){return i.endIndex-aI.endIndex||i.rule.source.length-aI.rule.source.length||i.precedenceScore-aI.precedenceScore||aI.rank-i.rank})}}aH.sort(function(aI,i){return i.matchedRules[0].endIndex-aI.matchedRules[0].endIndex||i.matchedRules[0].rule.source.length-aI.matchedRules[0].rule.source.length||i.matchedRules[0].precedenceScore-aI.matchedRules[0].precedenceScore||aI.rank-i.rank});return aH[0]},setSearchSessionState:function(){if(window.location.href.indexOf("query=")===-1&&window.location.href.indexOf("/order/catalog/product")===-1){sessionStorage.setItem("logSiteSearch","true");sessionStorage.setItem("logRefineSearch","false");sessionStorage.setItem("logContactUsSearch","false");$("#supportSearchAction button").bind("click",function(i){sessionStorage.setItem("logSiteSearch","false");sessionStorage.setItem("logContactUsSearch","true")});$("#support-keywords").bind("keypress",function(i){code=i.keyCode||i.which;if(code===13){sessionStorage.setItem("logSiteSearch","false");sessionStorage.setItem("logContactUsSearch","true")}})}}};var a={};var V;ay.providerSelector=searchAutoComplete.providerSelector(av);var H=searchAutoComplete.providers.allSources();ay.addProvider(H);var x=H.id;var ae=[];var Y;var ar;var aw=window.location.href.indexOf("navId=");if(aw!=-1){Y=window.location.href.substring(aw).split("&")[0]+"&"}aw=window.location.href.indexOf("l1=");if(aw!=-1){ar=window.location.href.substring(aw).split("&")[0]+"&"}if(!!window.globalProviderConfig&&!!window.globalProviderConfig.items&&window.globalProviderConfig.items.length>0){for(var J=0;J<window.globalProviderConfig.items.length;J++){var o=window.globalProviderConfig.items[J];if(o.id==H.id){ay.setProvider(x);ay.removeProvider(H.id)}var ah=(new baseProvider(ad,o.id||("provider_"+J),o.title,o.searchURL,o.typeAheadURL,o.group,o.include,o.exclude,o.activation))();ay.addProvider(ah);rulesMatched=ay.setMatchedRules(ah);if(rulesMatched){ay.setPrecedence(ah);ae.push(ah)}var y=o.searchURL+"&";if((!!Y&&y.indexOf(Y)!=-1)||(!!ar&&y.indexOf(ar)!=-1)){x=ah.id}}if(ae[0]){var F=ay.rankProviders(ae);x=F.id}}ay.setProvider(x);ay.setSearchSessionState();return ay})($,"smartsearch");$(function(){if(!!window.$typeahead){return}window.$typeahead=searchAutoCompleteTypeAhead;if(window.location.href.indexOf("/search/se/contract-lab")==-1&&window.location.href.indexOf("/store/se/storefront")==-1&&window.location.href.indexOf("/search/browse/category")==-1){window.$typeahead.setKeywordNoAuto(sessionStorage.getItem("searchKeyword"))}});function showHideGuided(e){var a=false;var b=new RegExp("^/../../");if(b.test(e)){a=true}var g=new RegExp("^/antibody/product/");var d=new RegExp("^/antibody/target/");var h=new RegExp("^/antibody/sitemap/");if(g.test(e)){a=true}if(d.test(e)){if(e.indexOf("/gene/")!=-1||e.indexOf("/panther/")!=-1||e.indexOf("/gene-ontology/")!=-1||e.indexOf("/protein/"!=-1)){a=true}else{a=false}}if(h.test(e)){if(e.indexOf("/Primary-Antibodies-P1-Sitemap.html")!=-1||e.indexOf("/Primary-Antibodies-G1-Sitemap.html")!=-1||e.indexOf("/Secondary-Antibodies-L1-Sitemap.html")!=-1||e.indexOf("/Secondary-Antibodies-L1-Sitemap.html"!=-1)){a=true}}if(e.indexOf("/antibody/primary/query/")!=-1||e.indexOf("/antibody/primary/keyword/")!=-1||e.indexOf("/antibody/primary/gene/")!=-1||e.indexOf("/antibody/primary/target/")!=-1||e.indexOf("/antibody/secondary/query/")!=-1||e.indexOf("/antibody/secondary/keyword/")!=-1||e.indexOf("/antibody/secondary/target/")!=-1||e.indexOf("/antibody/control/query/")!=-1||e.indexOf("/antibody/control/keyword/")!=-1||e.indexOf("/immunoassays/elisa/query/")!=-1||e.indexOf("/antibody/protein/keyword/")!=-1||e.indexOf("/antibody/protein/query/")!=-1||e.indexOf("/home/life-science/cell-analysis/flow-cytometry.html")!=-1||e.indexOf("/life-science/pcr/real-time-pcr/")!=-1||e.indexOf("/home/life-science/cell-analysis/flow-cytometry/antibodies-for-flow-cytometry.html")!=-1||e.indexOf("/home/life-science/cell-analysis/flow-cytometry.html")!=-1||e.indexOf("/home/life-science/cell-analysis/flow-cytometry/antibodies-for-flow-cytometry.html")!=-1||e.indexOf("/products-and-services/aspire-member-program")!=-1){a=false}var f=new RegExp("^/(order|store)/");if(f.test(e)){a=false}function c(i){i=i.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var k=new RegExp("[\\?&]"+i+"=([^&#]*)");var j=k.exec(location.search);return j===null?"":decodeURIComponent(j[1].replace(/\+/g," "))}if(c("showGSH")=="true"){a=true}return a}window.performance&&window.performance.mark&&window.performance.mark("searchAutoComplete.js:blockEnd");